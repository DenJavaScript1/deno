# Copyright 2018 the Deno authors. All rights reserved. MIT license.

import("//build/toolchain/cc_wrapper.gni")

# Verify that our custom toolchain is used on windows.
if (is_win) {
  win_toolchain = "//build_extra/toolchain/win:win_clang_$target_cpu"
  win_toolchain_in_use =
      win_toolchain == default_toolchain && win_toolchain == host_toolchain

  if (!win_toolchain_in_use) {
    # Using print instead of assert-with-message for readability of the output.
    print("The Windows build requires a custom toolchain. " +
          "Add these gn arguments:")
    print("  custom_toolchain=\"$win_toolchain\"")
    print("  host_toolchain=\"$win_toolchain\"")
    assert(win_toolchain_in_use)
  }
}
