// deno-fmt-ignore-file
// deno-lint-ignore-file

// Copyright Joyent and Node contributors. All rights reserved. MIT license.
// Taken from Node 18.12.1
// This file is automatically generated by `tools/node_compat/setup.ts`. Do not modify this file manually.

'use strict';
const common = require('../common');
const assert = require('assert');

const dnsPromises = require('dns').promises;

// Error when rrtype is invalid.
{
  const rrtype = 'DUMMY';
  assert.throws(
    () => dnsPromises.resolve('example.org', rrtype),
    {
      code: 'ERR_INVALID_ARG_VALUE',
      name: 'TypeError',
<<<<<<< HEAD
      message: `The argument 'rrtype' is invalid. Received '${rrtype}'`,
    },
=======
      message: `The argument 'rrtype' is invalid. Received '${rrtype}'`
    }
>>>>>>> 172e5f0a0 (1.38.5 (#21469))
  );
}

// Error when rrtype is a number.
{
  const rrtype = 0;
  assert.throws(
    () => dnsPromises.resolve('example.org', rrtype),
    {
      code: 'ERR_INVALID_ARG_TYPE',
      name: 'TypeError',
      message: 'The "rrtype" argument must be of type string. ' +
<<<<<<< HEAD
               `Received type ${typeof rrtype} (${rrtype})`,
    },
=======
               `Received type ${typeof rrtype} (${rrtype})`
    }
>>>>>>> 172e5f0a0 (1.38.5 (#21469))
  );
}

// Setting rrtype to undefined should work like resolve4.
{
  (async function() {
    const rrtype = undefined;
    const result = await dnsPromises.resolve('example.org', rrtype);
    assert.ok(result !== undefined);
    assert.ok(result.length > 0);
  })().then(common.mustCall());
}
